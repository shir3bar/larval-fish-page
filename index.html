<script src="http://www.google.com/jsapi" type="text/javascript"></script> 
<script type="text/javascript">google.load("jquery", "1.3.2");</script>

<style type="text/css">
	body {
		font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
		font-weight:300;
		font-size:18px;
		margin-left: auto;
		margin-right: auto;
		width: 1100px;
	}
	
	h1 {
		font-size:32px;
		font-weight:300;
	}
	
	.disclaimerbox {
		background-color: #eee;		
		border: 1px solid #eeeeee;
		border-radius: 10px ;
		-moz-border-radius: 10px ;
		-webkit-border-radius: 10px ;
		padding: 20px;
	}

	video.header-vid {
		height: 140px;
		border: 1px solid black;
		border-radius: 10px ;
		-moz-border-radius: 10px ;
		-webkit-border-radius: 10px ;
	}
	
	img.header-img {
		height: 140px;
		border: 1px solid black;
		border-radius: 10px ;
		-moz-border-radius: 10px ;
		-webkit-border-radius: 10px ;
	}
	
	img.rounded {
		border: 1px solid #eeeeee;
		border-radius: 10px ;
		-moz-border-radius: 10px ;
		-webkit-border-radius: 10px ;
	}
	
	a:link,a:visited
	{
		color: #1367a7;
		text-decoration: none;
	}
	a:hover {
		color: #208799;
	}
	
	td.dl-link {
		height: 160px;
		text-align: center;
		font-size: 22px;
	}
	
	.layered-paper-big { /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
		box-shadow:
		0px 0px 1px 1px rgba(0,0,0,0.35), /* The top layer shadow */
		5px 5px 0 0px #fff, /* The second layer */
		5px 5px 1px 1px rgba(0,0,0,0.35), /* The second layer shadow */
		10px 10px 0 0px #fff, /* The third layer */
		10px 10px 1px 1px rgba(0,0,0,0.35), /* The third layer shadow */
		15px 15px 0 0px #fff, /* The fourth layer */
		15px 15px 1px 1px rgba(0,0,0,0.35), /* The fourth layer shadow */
		20px 20px 0 0px #fff, /* The fifth layer */
		20px 20px 1px 1px rgba(0,0,0,0.35), /* The fifth layer shadow */
		25px 25px 0 0px #fff, /* The fifth layer */
		25px 25px 1px 1px rgba(0,0,0,0.35); /* The fifth layer shadow */
		margin-left: 10px;
		margin-right: 45px;
	}

	.paper-big { /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
		box-shadow:
		0px 0px 1px 1px rgba(0,0,0,0.35); /* The top layer shadow */

		margin-left: 10px;
		margin-right: 45px;
	}


	.layered-paper { /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
		box-shadow:
		0px 0px 1px 1px rgba(0,0,0,0.35), /* The top layer shadow */
		5px 5px 0 0px #fff, /* The second layer */
		5px 5px 1px 1px rgba(0,0,0,0.35), /* The second layer shadow */
		10px 10px 0 0px #fff, /* The third layer */
		10px 10px 1px 1px rgba(0,0,0,0.35); /* The third layer shadow */
		margin-top: 5px;
		margin-left: 10px;
		margin-right: 30px;
		margin-bottom: 5px;
	}
	
	.vert-cent {
		position: relative;
		top: 50%;
		transform: translateY(-50%);
	}
	
	hr
	{
		border: 0;
		height: 1px;
		background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
	}
</style>

<html>
<head>
	<title>Analysis of Larval Fish Feeding Behavior under Naturalistic Conditions</title>
	<meta property="og:image" content="Path to my teaser.png"/> <!-- Facebook automatically scrapes this. Go to https://developers.facebook.com/tools/debug/ if you update and want to force Facebook to rescrape. -->
	<meta property="og:title" content="Analysis of Larval Fish Feeding Behavior under Naturalistic Conditions" />
	<meta property="og:description" content="We work to detect the feeding behavior of larval fish in the wild.
	We built a unique data acquisition system, deployed it in an aquaculture rearing facility, and collected 300 videos." />

	<!-- Get from Google Analytics -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src=""></script> 
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-75863369-6');
	</script>
</head>

<body>
	<br>
	<center>
		<span style="font-size:36px">Analysis of Larval Fish Feeding Behavior under Naturalistic Conditions</span>
		<table align=center width=600px>
			<table align=center width=600px>
				<tr>
					<td align=center width=100px>
						<center>
							<span style="font-size:24px"><a href="https://shir3bar.github.io/">Shir Bar</a></span>
						</center>
					</td>
					<td align=center width=100px>
						<center>
							<span style="font-size:24px">Liraz Levy</span>
						</center>
					</td>
					<td align=center width=100px>
						<center>
							<span style="font-size:24px"><a href="http://www.eng.tau.ac.il/~avidan/">Shai Avidan</a></span>
						</center>
					</td>
					<td align=center width=100px>
						<center>
							<span style="font-size:24px"><a href="http://iui-eilat.ac.il/People/AcademicStaffProfile.aspx?sid=106">Roi Holzman</a></span>
						</center>
					</td>
				</tr>
			</table>
			<table align=center width=250px>
				<tr>
					<td align=center width=120px>
						<center>
							<span style="font-size:24px"><a href='#Paper'>[Paper]</a></span>
						</center>
					</td>
					<td align=center width=120px>
						<center>
							<span style="font-size:24px"><a href='./resources/poster.pdf'>[Poster]</a></span>
						</center>
					</td>
					<td align=center width=120px>
						<center>
							<span style="font-size:24px"><a href='#Data'>[Data]</a></span>
						</center>
					</td>
					<td align=center width=120px>
						<center>
							<span style="font-size:24px"><a href='#Code'>[GitHub]</a></span><br>
						</center>
					</td>
				</tr>
			</table>
		</table>
	</center>

	<center>
		<table align=center width=850px>
			<tr>
				<td width=800px>
					<center>
						<img class="round" style="width:800px" src="./resources/sample_vids/seq2_30dph_f15 - frames 150800-151000_mid.gif"/>
					</center>
				</td>
			</tr>
		</table>
		<table align=center width=850px>
			<tr>
				<td>
					<center>Can you spot the feeding fish?</center>

				</td>
			</tr>
		</table>
	</center>

	<hr>

	<table align=center width=850px>
		<center><h1>Abstract</h1></center>
		<tr>
			<td>
				Modern research efforts concerned with animal behavior rely heavily on image and video analysis. While such data are now quick to obtain, extracting and analyzing complex behaviors under naturalistic conditions from digital imagery is still a major challenge.
In this study, we introduce a novel system for imaging and analyzing the feeding behavior of freely-swimming fish larvae, as filmed in large aquaculture rearing pools, a naturalistic environment.
We first describe the design of a specialized system for imaging these tiny, fast-moving creatures.
We then show that an analysis pipeline based on action classification can be used to successfully detect and classify the sparsely-occurring behavior of the fish larvae in a curated experimental setting from videos featuring multiple animals.
Additionally, we introduce three new annotated datasets of underwater videography, in a curated and an uncurated setting.
Finally, we share the methods used and insights gained during the training and evaluation of models on low sample sizes and highly imbalanced datasets.
As these challenges are common to the analysis of animal behavior under naturalistic conditions, we believe our findings can contribute to the growing field of computer vision for the study and understanding of animal behavior.
			</td>
		</tr>
	</table>
	<br>

	<hr>
	<center><h1>Overview</h1></center>
	<!-- <p align="center">
		<iframe width="660" height="395" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen align="center"></iframe>
	</p> -->
	<table align=center width=800px>
		<tr>
			<td align=center width=800px>
				<center>
					<td><img class="round" style="width:800px" src="./resources/overview.png"/></td>
				</center>
			</td>
		</tr>
	</table>
	<table align=center width=850px>
			<tr>
				<center>
				<td align=center>
					<span style="font-size:14px">An overview of our workflow from data acquisition,
						through data annotation & curation to data analysis.</span>
				</td>
				</center>
			</tr>
		</table>
	<!-- <table align=center width=800px>
		<br>
		<tr>
			<center>
				<span style="font-size:28px"><a href=''>[Slides]</a>
				</span>
			</center>
		</tr>
	</table>-->
	<br>
	<table align=center width=850px>
		<center>
			<tr>
				<td>
					We are interested in detecting larval fish feeding behavior in the wild.
					This behavior is crucial to their survival and has never before been directly imaged outside the laboratory.
					In order to do this we tackle 3 challenges:
					<ol>
						<li><b>Data acquisition - how do we image tiny, fast moving animals?</b>
					  Details on the data acquisition system can be found in our paper.</li>
						<li><b>Data analysis - how do we automate the detection of feeding behavior?</b>
					  Our data analysis pipeline is presented below and code is available in our Github repo.</li>
						<li><b>Rare events - larval fish eat at a naturally low rate, how does this affect us?</b>
					  Rare events naturally lead to a small sample size and high data imbalance,
						  we use a simulation study to show how these effect model evaluation metrics.
						  More details in our paper and code.</li>
					</ol>
				</td>
			</tr>
		</center>
	</table>
	<hr>
	<div id="Data">
	<center><h1>Data</h1></center>
<!-- <video width="320" height="240" controls>
  <source src="./resources/sample_vids/strike_naturalistic.mp4"  type="video/mp4">
	say something
</video> -->
	<table align=center width=800px>
			<tr>
				<td align=center width=800px>
					<center>
					<img src = "./resources/sample_vids/strike_balanced.gif", width="300" height="300"/>
					<img src = "./resources/sample_vids/swim_balanced.gif", width="300" height="300"/>
				</center>
			</td>
		</tr>
	</table>

 <table align=center width=850px>
	  <tr>
	  	<center>
	  		<td align=center>
	  			<span style="font-size:14px">Two examples from the Balanced dataset, a strike (left) and a swim (right). </span>
	  		</td>
	  	</center>
	  </tr>
</table>

	<br>
	<table align=center width=850px>
		<center>
			<tr>
				<td>
					Our goal is to detect feeding strikes of larval fish (left) in untrimmed videos.
					To do this, we decided to take an action classification approach to distinguish between swimming (right),
					and striking behavior (left).
					We present a total of 3 datasets, one uncurated and two curated:
					<ol>
						<li><b>Uncurated - </b>
					  11 untrimmed videos: 1080x1092 pixels, 20-30 minutes @ 750fps.
							Annotation are spatio-temporal locations of the feeding strike events. <a href=''>[Uncurated - data coming soon]</a> </li>
						<li><b>Balanced - </b>
					  A highly curated dataset; clips are cropped tightly around single fish performing a single behavior,
						lighting is fairly even and no occlusions are present.
							71 swim clips and 66 strike clips, clip length varies, average is 46 frames,
							average size is 385<sup>2</sup> pixels.
							The annotation here is simply "strike" or "swim", clips are divided into the train/val/test.
							The two examples above are from this dataset.
							<a href='https://drive.google.com/file/d/1EGfK6TYwLQRVC8WCD9hZCGlKpjquPetp/view?usp=sharing'>[Balanced]</a> </li>
						<li><b>Naturalistic - </b>
							resulted from our curated experiment (see below);
							clips are more challenging in terms of lighting and occlusions. There are 63 strike clips
							and 4,500 other clips:, 118 contain no fish and 4,382 contain mostly swimming fish.
							Clip length is 80 frames, size varies between 250-650<sup>2</sup> pixels.
							The annotation here is "strike" and everything else is considered a "swim".
							<!--An extended set of annotations is provided in an additional csv file,
							these pertain to visual and behavioral attributes of the clips,
							see supplemental of the paper for info.-->
							<a href='https://drive.google.com/file/d/1rn4cyamd4fx_OglMqOuShYtqiPI_AoIE/view?usp=sharing'>[Naturalistic]</a>
						  </li>
					</ol>
				</td>
			</tr>
		</center>
	</table>
   	<table align=center width=800px>
			<tr>
				<td align=center width=800px>
					<center>
						<img src = "./resources/sample_vids/strike_naturalistic.gif", width="300" height="300"/>
						<img src = "./resources/sample_vids/swim_naturalistic.gif", width="300" height="300"/>
					</center>
	  		</td>
	  </tr>
</table>


 <table align=center width=850px>
	  <tr>
	  	<center>
	  		<td align=center>
	  			<span style="font-size:14px">Two examples from the Naturalistic dataset, a strike (left) and a swim (right). </span>
	  		</td>
	  	</center>
	  </tr>
</table>


 <!--
	<table align=center width=420px>
		<center>
			<tr>
				<td>
				</td>
			</tr>
		</center>
	</table>
	<table align=center width=400px>
		<tr>
			<td align=center width=400px>
				<center>
					<td><img class="round" style="width:450px" src=""/></td>
				</center>
			</td>
		</tr>
	</table>
	<table align=center width=850px>
		<center>
			<tr>
				<td>
					Short description if wanted
				</td>
			</tr>
		</center>
	</table>     -->

	<table align=center width=800px>
		<br>
		<tr>
			<td align=center width=120px>
				<center>
					<span style="font-size:24px"><a href=''>[Uncurated - soon]</a></span>
				</center>
			</td>
			<td align=center width=120px>
				<center>
					<span style="font-size:24px"><a href='https://drive.google.com/file/d/1EGfK6TYwLQRVC8WCD9hZCGlKpjquPetp/view?usp=sharing'>[Balanced]</a></span>
				</center>
			</td>
			<td align=center width=120px>
				<center>
					<span style="font-size:24px"><a href='https://drive.google.com/file/d/1--pFy4Oo9MVdzkk9r6sZ6wB0Os5o5AYZ/view?usp=sharing'>[Naturalistic]</a></span>
				</center>
			</td>
		</tr>
	</table>
	</div>
	<br>
	<hr>
	<div id="Code">
	<center><h1>Code</h1></center>
	<table align=center width=400px>
		<tr>
			<td align=center width=400px>
				<center>
					<td><img class="round" style="width:650px" src="./resources/pipeline_scheme.png"/></td>
				</center>
			</td>
		</tr>
	</table>

 <table align=center width=850px>
	  <tr>
	  	<center>
	  		<td align=center>
	  			<span style="font-size:14px">Visualization of our analysis pipeline and the curated experiment. </span>
	  		</td>
	  	</center>
	  </tr>
</table>
                                                                                                                                                               	<br>
	<table align=center width=850px>
		<center>
			<tr>
				<td>
					To detect feeding strikes of larval fish we take a detection followed by action classification approach.
					We trained a <a href='https://proceedings.neurips.cc/paper/2015/hash/14bfa6bb14875e45bba028a21ed38046-Abstract.html'>
					Faster-R-CNN </a> using <a href="https://github.com/facebookresearch/detectron2">Detectron2</a>
					 to detect our fish. We also trained a
					<a href="https://openaccess.thecvf.com/content_ICCV_2019/html/Feichtenhofer_SlowFast_Networks_for_Video_Recognition_ICCV_2019_paper.html">SlowFast</a>
					action classifier using <a href="https://pytorchvideo.org/">PyTorchVideo</a>
					to classify the fish's behavior into one of two classes 'swim' or 'strike'.
					<br>
					We test this pipeline in a curated experiment - we sample the frames where we know strike occurs,
					and additional frames where we know strikes do not occur. To simulate a more natural ratio of events we sample
					roughly ~10 times more frames without strikes.
					For each frame sampled we applied the detector, followed by the action classifier.
					By doing this for the 11 videos from the uncurated dataset with the highest strike rates
					we created the Naturalistic dataset.
					<br>
					The code for training the SlowFast model, including some custom data augmentations,
					and for this experiment will be available in our repository soon.
				</td>
			</tr>
		</center>
	</table>
	<table align=center width=800px>
		<br>
		<tr><center>
			<span style="font-size:28px">&nbsp;<a href=''>[GitHub - soon]</a>
			</span></center>
		</tr>
	</table>
	</div>
	<br>
	<hr>
	<div id="Performance">
	<center><h1>Performance evaluation</h1></center>
	<table align=center width=800px>
		<tr>
			<td align=center width=800px>
				<center>
					<td><img class="round" style="width:800px" src="./resources/performance_eval.png"/></td>
				</center>
			</td>
		</tr>
	</table>
	<table align=center width=850px>
			<tr>
				<center>
				<td align=center>
					<span style="font-size:14px">Results from our simulation study showing the performance for the
						performance of the same classifier varies greatly under different data imbalances.</span>
				</td>
				</center>
			</tr>
		</table>

	<table align=center width=850px>
		<center>
			<tr>
				<td>
					The fact that our events of interested are extremely rare results in a very small sample size and high data imbalance.
					ROCs are <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0118432">known</a> to be overly optimistic for imbalanced data.
					PRCs are a popular alternative but it is less <a href="https://link.springer.com/chapter/10.1007/978-3-030-50423-6_6">known </a>
					that they are sensitive to the level of data imbalance in data, even the same classifier can produce dramatically different results.
					This is crucial when taking a trained classifier out to the wild, where feeding strikes are much more
					sporadic than in our curated datasets.
					<br>
					We developed a simulation scheme that enables us to assess what performance might be under
					small sample size at different levels of data imbalance and with different classifier qualities.
					This is an R code utilizing the <a href="https://github.com/evalclass/precrec">precrec</a>
					for ROC and PRC calculations, you can find it in our repository.

				</td>
			</tr>
		</center>
	</table>
	</div>
	<br>
	<hr>
<div id="Paper">
	<table align=center width=450px>
		<center><h1>Paper and Supplementary Material</h1></center>
		<tr>
		<td><a href=""><img class="layered-paper-big" style="height:175px" src="./resources/paper.png"/></a></td>
			<td><span style="font-size:14pt">Coming soon<!--F. Author, S. Author, T. Author.<br>
				<b>Creative and Descriptive Paper Title.</b><br>
				In Conference, 20XX.<br>
				(hosted on <a href="">ArXiv</a>)<br> </span>
				(<a href="./resources/camera-ready.pdf">camera ready</a>)<br>
				<span style="font-size:4pt"><a href=""><br></a>-->
				</span>
			</td>

		</tr>
	</table>
	</div>
	<br>


	<!--<table align=center width=600px>
		<tr>
			<td><span style="font-size:14pt"><center>
				<a href="./resources/bibtex.txt">[Bibtex]</a>
			</center></span></td>
		</tr>
	</table>-->
	<hr>
	<br>

	<table align=center width=450px>
		<tr>
			<td width=400px>
				<center>
					<center><h1>Questions?</h1></center>
					We'd love to hear them! Feel free to contact the corresponding author at <a href="mailto:shirbar@tauex.tau.ac.il">shirbar@tauex.tau.ac.il</a>
				</center>
			</td>
		</tr>
	</table>

<br>
	<hr>
	<br>

	<table align=center width=900px>
		<tr>
			<td width=400px>
				<left>
					<center><h1>Acknowledgements</h1></center>
					This template was originally made by <a href="http://web.mit.edu/phillipi/">Phillip Isola</a> and <a href="http://richzhang.github.io/">Richard Zhang</a> for a <a href="http://richzhang.github.io/colorization/">colorful</a> ECCV project; the code can be found <a href="https://github.com/richzhang/webpage-template">here</a>.
				</left>
			</td>
		</tr>
	</table>

<br>
</body>
</html>

